---
title: "Q4"
author: "Arindom Baruah (Q4)"
execute: 
  echo: true
  message: false
  warning: false
format: html
---



```{r}
#| echo: false
library(nycflights13)
library(tidyverse)
library(ggplot2)

```



# Relation between arrival and departure delay


<div class="alert alert-block alert-success">
‚úàÔ∏è 

The arrival and departure delays of flights maybe related based on certain factors as explained below:

1. <b> Weather </b>: Severe weather often introduces unsafe conditions for flight operations to take place. Under such conditions, higher values of departure and arrival delays maybe expected.

2. <b> Flight carrier </b>: Based on their "on-time" performance records, certain carriers may record higher delays in their operations, leading to higher values of arrival and departure delays.

3. <b> Airport </b>: Certain large airports may observe higher traffic congestion. This inevitably leads to higher values of arrival and departure delays.

In conclusion, based on preliminary assessment of the data, the flight arrival and departure delays may often be <b> strongly related to each other linearly </b> due to a multitude of varying factors as explained above. 


‚úàÔ∏è </div>


# Units of delays

Based on the [documentation](https://cran.r-project.org/web/packages/nycflights13/nycflights13.pdf) of "nycflights13" package on R, the departure and arrival delays are reported in __minutes__.


# Scatterplot between arrival and departure delays

```{r}
#| label: fig-deparr
#| fig-cap: "Relationship between arrival and departure delays"

pl1 <-
  ggplot(data = flights %>% drop_na(), aes(x =  dep_delay, y = arr_delay)) + 
  geom_point() + geom_smooth(method='lm') + theme(aspect.ratio = 1) + 
  labs(x = "Departure delay (in mins)", y= "Arrival delay (in mins)") + theme_classic() +
   annotate(
    "segment",
    x = 0,
    y = 500,
    xend = 50  ,
    yend = 200,
    color = 'red',
    arrow = arrow(type = "closed",
                  length = unit(0.02, "npc"))
  ) +
  annotate(
    "text",
    x = 10,
    y = 520,
    colour = "red",
    label = 'Weak linear correlation',
    size = unit(2.5, "pt")
  ) +
   annotate(
    "segment",
    x = 850,
    y = 700,
    xend = 870  ,
    yend = 850,
    color = 'blue',
    arrow = arrow(type = "closed",
                  length = unit(0.02, "npc"))
  ) +
  annotate(
    "text",
    x = 840,
    y = 670,
    colour = "blue",
    label = 'Strong linear correlation',
    size = unit(2.5, "pt")
  )
pl1
```
@fig-deparr visualises the departure and arrival delays through a scatter plot.

<div class="alert alert-block alert-warning">
üìàüí°

We have plotted the variable dep_delay (Departure delay) on the horizontal X-axis as it __aids the intuition of the plot__. In general, departure delays often mark the start of a flight delay. A high departure delay could inevitably lead to a high arrival delay of the flight. As a result, we have considered __the departure delay as the independent variable while observing arrival delay as the dependent variable.__ Such analysis is often better observed by placing the independent variable on the X-axis and analysing whether a strong relation can be observed on the Y-axis for the corresponding values of the X-axis.

üìàüí°  </div>



# Relationship between arrival delay and departure delay based on the scatter plot

Based on the plot illustrated through @fig-deparr, we can make the following observation:

<div class="alert alert-block alert-warning">
‚úàÔ∏è

We can make the following important observations with respect to the relation between departure and arrival delays:

1. There appears to be a <b> linear relationship </b> between the departure and arrival delays.
2. However, we can also observe that for delays of less than 400 minutes, the <b> linear correlation is weak </b> as many observations scatter away from the linear prediction.
3. On the other hand, for departure and arrival delays above 400 minutes, there appears to be a <b> strong linear correlation </b>. 

‚úàÔ∏è </div>


